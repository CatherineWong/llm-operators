Experiment Parameters
================================================================================
Timestamp: 2023-09-07 13:08:29.873541
Command to replicate: python main.py --experiment_name alfred_cot_250_filtered_0_912023 --random_seed 0 --output_directory generated --train_iterations 2 --pddl_domain_name alfred_linearized --dataset_name alfred_cot_250_filtered --dataset_fraction 1.0 --dataset_pddl_directory data/dataset/alfred_linearized_pddl --supervision_name supervision --goal_supervision_fraction 0.1 --initial_goal_supervision_prefix ALL --plan_supervision_fraction 0.1 --initial_plans_prefix ALL --initial_pddl_predicates  --initial_pddl_operators GotoLocation PickupObjectInReceptacle PickupObjectNotInReceptacle PutObjectInReceptacle CleanObject HeatObject CoolObject ToggleObject SliceObject --operator_propose_minimum_usage 2 --operator_use_cot 1 --goal_propose_include_codex_types  --codex_goal_temperature 1.0 --codex_operator_temperature 1.0 --codex_plan_temperature 1.0 --maximum_operator_arity 4 --n_goal_samples 4 --n_plan_samples 5 --n_operator_samples 3 --n_attempts_to_plan 1 --external_goal_sample_with_prompt  --external_goal_supervision data/dataset/alfred-goal-supervision_ --external_plan_supervision data/dataset/alfred-grate-break-fill-restart-supervision.json --external_operator_supervision data/dataset/alfred-grate-break-fill-restart-operator-supervision_ --external_operator_sample_with_prompt  --external_operator_names GrateObject BakeObject FillObject RestartObject --planner task_planner_fd --planner_timeout None --planner_minimum_n_operators 7 --planner_run_second_pass 1 --motionplan_search_type counter --operator_pseudocounts 0.05 --operator_pseudocounts_denominator 0.5 --operator_acceptance_threshold 0.1 --checkpoint_every_n_problem_plans 2 --resume  --resume_from_iteration 0 --resume_from_problem_idx 0 --verbose  --debug_export_failed_pddl None --debug_no_propose_plans_operators_goals  --debug_mock_propose_goals  --debug_mock_propose_plans  --debug_mock_propose_operators  --debug_skip_propose_operators_after -1 --debug_skip_propose_plans_after -1 --debug_skip_task_plans  --debug_mock_task_plans  --debug_mock_motion_plans  --debug_skip_motion_plans  --debug_start_problem_idx 0 --debug_skip_problems None --debug_ground_truth_operators  --debug_ground_truth_goals  --debug_stop_after_first_proposal  --debug_cw_skip_location_check  


Loaded PDDL file with operators
================================================================================
Domain: alfred_linearized
Filename: data/domains/alfred_linearized.pddl
Operators: 12
Ground truth operators: 
   GotoLocation
   OpenObject
   CloseObject
   PickupObjectInReceptacle
   PickupObjectNotInReceptacle
   PutObjectInReceptacle
   PutObjectInReceptacleObject
   CleanObject
   HeatObject
   CoolObject
   ToggleObject
   SliceObject
Initializing with operators: 
  GotoLocation
  PickupObjectInReceptacle
  PickupObjectNotInReceptacle
  PutObjectInReceptacle
  CleanObject
  HeatObject
  CoolObject
  ToggleObject
  SliceObject


load_alfred_filtered_planning_domain_problems: loaded alfred_cot_250_filtered from data/dataset/alfred-cot-250-filtered-NLgoals-operators.json
train : 223 / original 223 problems
valid_seen : 145 / original 145 problems
valid_unseen : 155 / original 155 problems
Loaded initial dataset: alfred_cot_250_filtered
================================================================================
Initial train problems: 223
Marking problems for goal supervision: fraction=0.1, prefix=['ALL']
Sampling problems for goal supervision: 
	 look_at_obj_in_light : 3
	 pick_cool_then_place_in_recep : 2
	 pick_and_place_simple : 3
	 pick_heat_then_place_in_recep : 3
	 pick_and_place_simple_slice : 1
	 pick_heat_then_place_in_recep_slice : 2
	 pick_clean_then_place_in_recep : 2
	 pick_cool_then_place_in_recep_slice : 2
Total goal supervision problems: 18
Marking problems for plan supervision: fraction=0.1, prefix=['ALL']
This is not implemented yet. (!!!)

Loaded PDDL supervision
================================================================================
Loaded additional PDDL supervision from the following domain files:
  data/domains/supervision_domains/movie_domain.pddl
  data/domains/supervision_domains/depot_domain.pddl
  data/domains/supervision_domains/travel_domain.pddl


Training started.
================================================================================

Using ground truth goals, skipping: propose_goals_for_problems
preprocess_goals: preprocessing 205 unsolved problems.
preprocess_goals: Preprocess goals top-K accuracy: 0 / 205 exact match to ground truth goal.
Logging preprocessed goals: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_preprocessed_goals.csv

mock_propose_plans_for_problems:: from generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_codex_plans.json


mock_propose_plans_for_problems:: loaded a total of 223 plans for 223 unsolved problems.
Logging proposed plans: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_codex_plans.csv

propose_operators_for_problems:: proposing for 23 operators.
['ExamineObject', 'TurnOnObject', 'TurnOnLight', 'ThrowObject', 'CutObject', 'InspectObject', 'CookObject', 'OpenObject', 'EmptyObject', 'PlaceObject', 'WashObject', 'TurnOffObject', 'ToastObject', 'DrainObject', 'ChillObject', 'MicrowaveObject', 'UseObject', 'WarmObject', 'CloseObject', 'LookAtObject', 'RinseObject', 'DiscardObject', 'PutdownObject']
mock_propose_operators_for_problems:: from generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_codex_operators.json
Loaded 23 mock operators:
['ExamineObject', 'TurnOnObject', 'TurnOnLight', 'ThrowObject', 'CutObject', 'InspectObject', 'CookObject', 'OpenObject', 'EmptyObject', 'PlaceObject', 'WashObject', 'TurnOffObject', 'ToastObject', 'DrainObject', 'ChillObject', 'MicrowaveObject', 'UseObject', 'WarmObject', 'CloseObject', 'LookAtObject', 'RinseObject', 'DiscardObject', 'PutdownObject']
preprocess_operators:: preprocessing 23 operators.
['ExamineObject', 'TurnOnObject', 'TurnOnLight', 'ThrowObject', 'CutObject', 'InspectObject', 'CookObject', 'OpenObject', 'EmptyObject', 'PlaceObject', 'WashObject', 'TurnOffObject', 'ToastObject', 'DrainObject', 'ChillObject', 'MicrowaveObject', 'UseObject', 'WarmObject', 'CloseObject', 'LookAtObject', 'RinseObject', 'DiscardObject', 'PutdownObject']
Logging preprocessed operators: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_preprocessed_operators.csv

Attempting task and motion planning on all problems.

Logging scored operators: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_scored_operators.csv
Logging all task plans out to: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_task_plans.json
Logging all motion plans out to: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_motion_plans.json

Experiment Summary
================================================================================
Iteration: 0
Evaluated successful motion plans: 0 / 1 problems so far.
Overall successful motion plans: 0 / 223 problems.
Total problems: 223
Current operators: 223


Logging scored operators: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_scored_operators.csv
Logging all task plans out to: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_task_plans.json
Logging all motion plans out to: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_motion_plans.json

Experiment Summary
================================================================================
Iteration: 0
Evaluated successful motion plans: 0 / 3 problems so far.
Overall successful motion plans: 0 / 223 problems.
Total problems: 223
Current operators: 223


Logging scored operators: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_scored_operators.csv
Logging all task plans out to: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_task_plans.json
Logging all motion plans out to: generated/alfred_cot_250_filtered_0_912023/0/alfred_cot_250_filtered_0_912023_motion_plans.json

Experiment Summary
================================================================================
Iteration: 0
Evaluated successful motion plans: 0 / 5 problems so far.
Overall successful motion plans: 0 / 223 problems.
Total problems: 223
Current operators: 223

task_planner.attempt_task_plan_for_problem: attempt 6 / 223 ID=train/pick_and_place_simple-AppleSliced-None-Fridge-30/trial_T20190907_105523_799331 AttemptIdx=0 GoalIdx=0
  Now attempting to plan for goal: 0 / 1
    Running planner with existing operators + 15 proposed operators: 
    Initial Operators: dict_keys(['GotoLocation', 'PickupObjectInReceptacle', 'PickupObjectNotInReceptacle', 'PutObjectInReceptacle', 'CleanObject', 'HeatObject', 'CoolObject', 'ToggleObject', 'SliceObject'])
    Proposed Operators: {'PlaceObject_0', 'TurnOnLight_0', 'ChillObject_0', 'MicrowaveObject_1', 'PutdownObject_1', 'WarmObject_1', 'PutdownObject_0', 'ThrowObject_0', 'RinseObject_1', 'EmptyObject_2', 'ThrowObject_2', 'WarmObject_2', 'TurnOnObject_1', 'MicrowaveObject_0', 'RinseObject_0'}
    Language: carry a knife to cut the yellow apple in the fridge.
    Ground truth goal: (:goal (exists (?r - receptacle) (exists (?o - object) (and (objectType ?o AppleType) (receptacleType ?r FridgeType) (inReceptacle ?o ?r) (sliceable ?o) (isSliced ?o) ) )))
    Proposed goal: (:goal (exists (?r - receptacle) (exists (?o - object) (and (objectType ?o AppleType) (receptacleType ?r FridgeType) (inReceptacle ?o ?r) (sliceable ?o) (isSliced ?o) ) )))
Instantiating FD with --alias "lama-first" 
    Plan success: False
    Plan string:  Plan not found with FD! Error: INFO planner time limit: None INFO planner memory limit: None INFO Running translator. INFO translator stdin: None INFO translator time limit: None INFO translator memory limit: None INFO translator command line string: /Users/zyzzyva/miniconda3/envs/llm-operators-zs/bin/python3 /Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/translate.py /var/folders/d6/l_63vcns4fd8zd1w5fbtdvz40000gn/T/tmpm9dsjkoq /var/folders/d6/l_63vcns4fd8zd1w5fbtdvz40000gn/T/tmpnlb2iul2 --sas-file /var/folders/d6/l_63vcns4fd8zd1w5fbtdvz40000gn/T/tmpmf5pam15 Parsing... translate exit code: 30 Driver aborting after translate INFO Planner time: 0.04s b'Traceback (most recent call last):\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/translate.py", line 747, in <module>\n main()\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/translate.py", line 705, in main\n task = pddl_parser.open(\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/pddl_file.py", line 38, in open\n return parsing_functions.parse_task(domain_pddl, task_pddl)\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 296, in parse_task\n domain_name, domain_requirements, types, type_dict, constants, predicates, predicate_dict, functions, actions, axioms \\\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 389, in parse_domain_pddl\n action = parse_action(entry, type_dict, predicate_dict)\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 261, in parse_action\n precondition = parse_condition(\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 58, in parse_condition\n condition = parse_condition_aux(alist, False, type_dict, predicate_dict)\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 87, in parse_condition_aux\n parts = [parse_condition_aux(part, negated, type_dict, predicate_dict)\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 87, in <listcomp>\n parts = [parse_condition_aux(part, negated, type_dict, predicate_dict)\n File "/Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/pddlgym_planners/FD/builds/release/bin/translate/pddl_parser/parsing_functions.py", line 76, in parse_condition_aux\n assert len(args) == 1\nAssertionError\n'
    Plan time: 0.123s
Ground truth PDDL plan is: 
(GotoLocation countertop)
(PickupObject knife)
(GotoLocation apple)
(SliceObject apple)
> /Users/zyzzyva/Desktop/zyzzyva/code/llm-operators/llm_operators/task_planner.py(385)run_planner()
-> return False,  evaluated_plans, output_json
(Pdb) 